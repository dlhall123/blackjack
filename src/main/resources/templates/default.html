<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Blackjack</title>
	</head>
	<body>
		{{#game.isNewGame}}
		<form method="post" action="/newGame">
			<label>Input the number of decks to play with
				<input type="number" name="numDecks" value="6" required>
			</label><br>
			<label>
				Input the starting wallet balance(Don't worry, it will soon be gone!)
				<input type="number" name="walletAmount" value="500" step="0.01" required>
			</label><br>
			<label>
				Input the bet amount (bet more, win more?)
				<input type="number" name="betAmount" value="10" step="0.01" required>
			</label>
			<button>Let's Go!</button>
		</form>
		{{/game.isNewGame}}
		{{^game.isNewGame}}
		<div id="dealerHand" class="cards">
					<h1>Dealer Hand</h1>
			{{#game.playerTurn}}
			<table>
				<thead>
					<tr>
						<th>Suit</th>
						<th>Rank</th>
					</tr>
				</thead>
				<tbody>
				
					<tr>
						<td>{{ game.getDealerHand.hand.0.suit }}</td>
						<td>{{ game.getDealerHand.hand.0.rank }} </td>
					</tr>
				</tbody>
			</table>
			<h2>Dealer up-card value: {{game.getDealerHand.hand.0.value}}</h2>					
			{{/game.playerTurn}}
			{{^game.playerTurn}}
			<table>
				<thead>
					<tr>
						<th>Suit</th>
						<th>Rank</th>
					</tr>
				</thead>
				<tbody>
				{{#game.getDealerHand.hand}}
					<tr>
						<td>{{ suit }}</td>
						<td>{{ rank }} </td>
					</tr>
				{{/game.getDealerHand.hand}}

				</tbody>
			</table>
			<h2>Dealer hand value: {{game.getDealerHand.handValue}}</h2>
			{{/game.playerTurn}}
			
		</div>
		<div id="playerHand" class="cards">
			<h1>Player Hand</h1>
			<table>
				<thead>
					<tr>
						<th>Suit</th>
						<th>Rank</th>
					</tr>
				</thead>
				<tbody>
					{{#game.getPlayerHand.hand}}
					<tr>
						<td>{{ suit }}</td>
						<td>{{ rank }} </td>
					</tr>
					{{/game.getPlayerHand.hand}}
	
				</tbody>
			</table>
			<h2>Player hand value: {{game.getPlayerHand.handValue}}</h2>
			{{#game.playerTurn}}			
				{{^game.getPlayerHand.isBusted}}
				<form method="post" action="/hit">
					<button>Hit</button>
				</form>
					<form method="post" action="/stand">
					<button>Stand</button>
				</form>
				{{#game.playerDoubleDownAvailable}}
				<form method="post" action="/doubleDown">
				
					<button>Double Down</button>
				</form>
				{{/game.playerDoubleDownAvailable}}
				{{#game.splitIsAvailable}}
				<form method="post" action="/split">
				
					<button>Split</button>
				</form>
				{{/game.splitIsAvailable}}
				{{/game.getPlayerHand.isBusted}}
			{{/game.playerTurn}}
			{{^game.isPlayerTurn}}
				{{#game.getPlayerHand.isBusted}}
				<h2>player busted!</h2>
				{{/game.getPlayerHand.isBusted}}
				
				{{#game.getDealerHand.isBusted}}
				<h2>dealer busted!</h2>
				{{/game.getDealerHand.isBusted}}			
				
				{{#game.isPlayerWinner}}
				<h1>Player Wins!</h1>
				{{/game.isPlayerWinner}}
				
				{{#game.isPush}}
				<h1>Push</h1>
				{{/game.isPush}}
				
				{{#game.isDealerWinner}}
				<h1>Dealer Wins!</h1>
				{{/game.isDealerWinner}}		
				<form method="post" action="/newHand">
					<button>New Hand</button>
				</form>	<br>
				<label>Change Bet Amount:
					<form method="post" action="changeBet">
						<input type="number" name="newBetAmount" step="0.01" required>
						<button>Set Amount</button>
					</form>
				</label>
				{{#game.isPlayerBroke}}
				<h2>out of cash to bet at current level.  Please lower bet or start a new game.</h2>
				<form method="post" action="/brokeNewGame">
				<button>New Game</button>
				</form>
				{{/game.isPlayerBroke}}
			{{/game.isPlayerTurn}}
				
			<h2>Bet Amount: ${{game.getPlayerBet}}</h2>
			<h2>Player Wallet: ${{game.playerWalletAmount}}</h2>
		</div>
		<p>Cards Remaining in current shoe: {{ game.getCardsInDeck }}.</p>  
		<p>Auto shuffle occurs when at or below 15 cards remaining in the shoe and a new hand is started</p>
		{{/game.isNewGame}}
	
	</body>
</html>